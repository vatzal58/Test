CREATE PROCEDURE GetChores (
    @Id INT,          -- Mandatory Id parameter
    @Type CHAR(1) = 'C' -- 'C' for Chore, 'P' for Parent, 'CH' for Child
)
AS
BEGIN
    IF @Type = 'C'  -- Get chore by ChoreId
    BEGIN
        SELECT 
            c.Id AS ChoreId,
            c.Title AS ChoreTitle,
            c.Description AS ChoreDescription,
            c.Reward AS ChoreReward,
            c.DueDate AS ChoreDueDate,
            c.CompletionDate AS ChoreCompletionDate,
            c.Status AS ChoreStatus,
            c.Frequency AS ChoreFrequency,
            c.Category AS ChoreCategory,
            c.CreatedAt AS ChoreCreatedAt,
            c.CreatedBy AS ChoreCreatedBy,
            com.Id AS CommentId,
            com.Comment AS CommentText,
            com.CreatedAt AS CommentCreatedAt,
            u.Name AS CommentCreatedBy,
            a.Id AS AttachmentId,
            a.Type AS AttachmentType
        FROM Chores c
        LEFT JOIN Comments com ON c.Id = com.ChoreId
        LEFT JOIN Attachments a ON com.AttachmentId = a.Id
        LEFT JOIN Users u ON com.CreatedBy = u.Id
        WHERE c.Id = @Id
        ORDER BY c.Id, com.CreatedAt;
    END
    ELSE IF @Type = 'P' -- Get chores by ParentId
    BEGIN
        SELECT 
            c.Id AS ChoreId,
            c.Title AS ChoreTitle,
            c.Description AS ChoreDescription,
            c.Reward AS ChoreReward,
            c.DueDate AS ChoreDueDate,
            c.CompletionDate AS ChoreCompletionDate,
            c.Status AS ChoreStatus,
            c.Frequency AS ChoreFrequency,
            c.Category AS ChoreCategory,
            c.CreatedAt AS ChoreCreatedAt,
            c.CreatedBy AS ChoreCreatedBy,
            com.Id AS CommentId,
            com.Comment AS CommentText,
            com.CreatedAt AS CommentCreatedAt,
            u.Name AS CommentCreatedBy,
            a.Id AS AttachmentId,
            a.Type AS AttachmentType
        FROM Chores c
        LEFT JOIN Comments com ON c.Id = com.ChoreId
        LEFT JOIN Attachments a ON com.AttachmentId = a.Id
        LEFT JOIN Users u ON com.CreatedBy = u.Id
        WHERE c.ParentId = @Id
        ORDER BY c.Id, com.CreatedAt;
    END
    ELSE IF @Type = 'CH' -- Get chores by ChildId
    BEGIN
        SELECT 
            c.Id AS ChoreId,
            c.Title AS ChoreTitle,
            c.Description AS ChoreDescription,
            c.Reward AS ChoreReward,
            c.DueDate AS ChoreDueDate,
            c.CompletionDate AS ChoreCompletionDate,
            c.Status AS ChoreStatus,
            c.Frequency AS ChoreFrequency,
            c.Category AS ChoreCategory,
            c.CreatedAt AS ChoreCreatedAt,
            c.CreatedBy AS ChoreCreatedBy,
            com.Id AS CommentId,
            com.Comment AS CommentText,
            com.CreatedAt AS CommentCreatedAt,
            u.Name AS CommentCreatedBy,
            a.Id AS AttachmentId,
            a.Type AS AttachmentType
        FROM Chores c
        LEFT JOIN Comments com ON c.Id = com.ChoreId
        LEFT JOIN Attachments a ON com.AttachmentId = a.Id
        LEFT JOIN Users u ON com.CreatedBy = u.Id
        WHERE c.ChildId = @Id
        ORDER BY c.Id, com.CreatedAt;
    END
END;
